(()=>{"use strict";class i{constructor(i,t,s){this.position=i,this.image=t,this.ctx=s}draw(){this.ctx.drawImage(this.image,this.position.x,this.position.y,i.width,i.height)}}i.width=40,i.height=40;let t=document.createElement("h1");t.textContent="Welcome to TypeScript! Pacman";const s=document.createElement("canvas"),e=s.getContext("2d");s.width=window.innerWidth,s.height=window.innerHeight,s.id="cvs";let o=document.getElementById("app");o.appendChild(t),o.appendChild(s);const n=[],h=[];let a=new Image,c=new Image,r=new Image,d=new Image,p=new Image,w=new Image,y=new Image;a.src="./sprites/block.png",c.src="./sprites/top-bottom.png",r.src="./sprites/left-right.png",d.src="./sprites/top-left.png",p.src="./sprites/top-right.png",w.src="./sprites/bottom-left.png",y.src="./sprites/bottom-right.png",[["tl","=","=","=","=","=","tr"],["|"," ","*","*","*","*","|"],["|","*","-","*","-","*","|"],["|","*","*","*","*","*","|"],["|","*","-","*","-","*","|"],["|","*","*","*","*","*","|"],["bl","=","=","=","=","=","br"]].forEach(((t,s)=>{t.forEach(((t,o)=>{"-"===t?n.push(new i({x:o*i.width,y:s*i.height},a,e)):"="===t?n.push(new i({x:o*i.width,y:s*i.height},c,e)):"|"===t?n.push(new i({x:o*i.width,y:s*i.height},r,e)):"tl"===t?n.push(new i({x:o*i.width,y:s*i.height},d,e)):"tr"===t?n.push(new i({x:o*i.width,y:s*i.height},p,e)):"bl"===t?n.push(new i({x:o*i.width,y:s*i.height},w,e)):"br"===t?n.push(new i({x:o*i.width,y:s*i.height},y,e)):"*"===t&&h.push(new class{constructor(i,t){this.position=i,this.radius=5,this.ctx=t}draw(){this.ctx.fillStyle="green",this.ctx.beginPath(),this.ctx.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()}}({x:o*i.width+i.width/2,y:s*i.height+i.height/2},e))}))}));const l=new class{constructor(i,t){this.position=i,this.velocity={x:0,y:0},this.radius=15,this.ctx=t}draw(){this.ctx.fillStyle="yellow",this.ctx.beginPath(),this.ctx.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()}update(){this.draw(),this.position.y+=this.velocity.y,this.position.x+=this.velocity.x}}({x:i.width+i.width/2,y:i.height+i.height/2},e),g={w:{isDown:!1},a:{isDown:!1},s:{isDown:!1},d:{isDown:!1}};let x="";const u=(t,s)=>t.position.x+t.radius+t.velocity.x>=s.position.x&&t.position.x-t.radius+t.velocity.x<=s.position.x+i.width&&t.position.y+t.radius+t.velocity.y>=s.position.y&&t.position.y-t.radius+t.velocity.y<=s.position.y+i.height;let b=()=>{if(requestAnimationFrame(b),e.clearRect(0,0,s.width,s.height),g.w.isDown&&"w"===x)for(let i=0;i<n.length;i++){if(u(Object.assign(Object.assign({},l),{velocity:{x:0,y:-5}}),n[i])){l.velocity.y=0;break}l.velocity.y=-5}else if(g.a.isDown&&"a"===x)for(let i=0;i<n.length;i++){if(u(Object.assign(Object.assign({},l),{velocity:{x:-5,y:0}}),n[i])){l.velocity.x=0;break}l.velocity.x=-5}else if(g.s.isDown&&"s"===x)for(let i=0;i<n.length;i++){if(u(Object.assign(Object.assign({},l),{velocity:{x:0,y:5}}),n[i])){l.velocity.y=0;break}l.velocity.y=5}else if(g.d.isDown&&"d"===x)for(let i=0;i<n.length;i++){if(u(Object.assign(Object.assign({},l),{velocity:{x:5,y:0}}),n[i])){l.velocity.x=0;break}l.velocity.x=5}n.forEach((i=>{i.draw(),u(l,i)&&(l.velocity.x=0,l.velocity.y=0)})),h.forEach(((i,t)=>{var s,e;i.draw(),s=l,e=i,(Math.hypot(s.position.x+s.radius-e.position.x,s.position.y+s.radius-e.position.y)<=s.radius+e.radius||Math.hypot(s.position.x-s.radius-e.position.x,s.position.y+s.radius-e.position.y)<=s.radius+e.radius||Math.hypot(s.position.x+s.radius-e.position.x,s.position.y-s.radius-e.position.y)<=s.radius+e.radius||Math.hypot(s.position.x-s.radius-e.position.x,s.position.y-s.radius-e.position.y)<=s.radius+e.radius)&&h.splice(t,1)})),l.update()};window.addEventListener("keydown",(i=>{switch(i.key){case"a":g.a.isDown=!0,x="a";break;case"d":g.d.isDown=!0,x="d";break;case"w":g.w.isDown=!0,x="w";break;case"s":g.s.isDown=!0,x="s"}})),window.addEventListener("keyup",(i=>{switch(i.key){case"a":g.a.isDown=!1;break;case"d":g.d.isDown=!1;break;case"w":g.w.isDown=!1;break;case"s":g.s.isDown=!1}})),b()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0osSUFBSyxJQUNETixFQUFLSSxFQUFFRixRQUFTLEVBQ2hCSSxFQUFVLEksSUFLdEJ2QyxPQUFPcUQsaUJBQWlCLFNBQVVDLElBQzlCLE9BQVFBLEVBQUVDLEtBQ04sSUFBSyxJQUNEdEIsRUFBS0csRUFBRUQsUUFBUyxFQUNoQixNQUNKLElBQUssSUFDREYsRUFBS0ssRUFBRUgsUUFBUyxFQUNoQixNQUNKLElBQUssSUFDREYsRUFBS0MsRUFBRUMsUUFBUyxFQUNoQixNQUNKLElBQUssSUFDREYsRUFBS0ksRUFBRUYsUUFBUyxFLElBSzVCUSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFjbWFuLXR5cGVzY3JpcHQvLi9Cb3VuZGFyeS50cyIsIndlYnBhY2s6Ly9wYWNtYW4tdHlwZXNjcmlwdC8uL2FwcC50cyIsIndlYnBhY2s6Ly9wYWNtYW4tdHlwZXNjcmlwdC8uL0Zvb2QudHMiLCJ3ZWJwYWNrOi8vcGFjbWFuLXR5cGVzY3JpcHQvLi9QYWNtYW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsidHlwZSBQb3NpdGlvbiA9IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfTtcblxuY2xhc3MgQm91bmRhcnkge1xuICAgIHBvc2l0aW9uOiBQb3NpdGlvbjtcbiAgICBpbWFnZTogSFRNTEltYWdlRWxlbWVudDtcbiAgICBzdGF0aWMgd2lkdGggPSA0MDtcbiAgICBzdGF0aWMgaGVpZ2h0ID0gNDA7XG4gICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbjogUG9zaXRpb24sIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgLy8gY3R4LmZpbGxTdHlsZSA9IFwiYmx1ZVwiO1xuICAgICAgICAvLyBjdHguZmlsbFJlY3QodGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnksIEJvdW5kYXJ5LndpZHRoLCBCb3VuZGFyeS5oZWlnaHQpO1xuICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy5pbWFnZSwgdGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnksIEJvdW5kYXJ5LndpZHRoLCBCb3VuZGFyeS5oZWlnaHQpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQm91bmRhcnksIFBvc2l0aW9ufSIsIi8vIENyZWF0ZWQgZnJvbSA6IGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9NUlNWHBwM3JvaFFcblxuaW1wb3J0IHsgQm91bmRhcnksIFBvc2l0aW9uIH0gZnJvbSBcIi4vQm91bmRhcnlcIjtcbmltcG9ydCBQYWNtYW4gIGZyb20gXCIuL1BhY21hblwiO1xuaW1wb3J0IEZvb2QgZnJvbSBcIi4vRm9vZFwiO1xuXG5sZXQgd2VsY29tZTogc3RyaW5nID0gXCJXZWxjb21lIHRvIFR5cGVTY3JpcHQhIFBhY21hblwiO1xuXG5sZXQgaGVhZGluZzogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG5oZWFkaW5nLnRleHRDb250ZW50ID0gd2VsY29tZTtcblxuY29uc3QgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XG5jb25zdCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuY2FudmFzLmlkID0gXCJjdnNcIjtcblxubGV0IGFwcDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKTtcbmFwcC5hcHBlbmRDaGlsZChoZWFkaW5nKTtcbmFwcC5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5jb25zdCBnYW1lTWFwOiBzdHJpbmdbXVtdID0gW1xuICAgIFsndGwnLCAnPScsJz0nLCc9JywnPScsJz0nLCd0ciddLFxuICAgIFsnfCcsICcgJywnKicsJyonLCcqJywnKicsJ3wnXSxcbiAgICBbJ3wnLCAnKicsJy0nLCcqJywnLScsJyonLCd8J10sXG4gICAgWyd8JywgJyonLCcqJywnKicsJyonLCcqJywnfCddLFxuICAgIFsnfCcsICcqJywnLScsJyonLCctJywnKicsJ3wnXSxcbiAgICBbJ3wnLCAnKicsJyonLCcqJywnKicsJyonLCd8J10sXG4gICAgWydibCcsICc9JywnPScsJz0nLCc9JywnPScsJ2JyJ10sXG5dXG5cbmxldCBtYW5WZWxvY2l0eSA9IDU7XG5cbmNvbnN0IGJvdW5kYXJpZXM6IEJvdW5kYXJ5W10gPSBbXTtcbmNvbnN0IGZvb2RQZWxsZXRzOiBGb29kW10gPSBbXTtcblxubGV0IGJsb2NrID0gbmV3IEltYWdlKCk7XG5sZXQgdG9wX2JvdHRvbSA9IG5ldyBJbWFnZSgpO1xubGV0IGxlZnRfcmlnaHQgPSBuZXcgSW1hZ2UoKTtcbmxldCB0b3BfbGVmdCA9IG5ldyBJbWFnZSgpO1xubGV0IHRvcF9yaWdodCA9IG5ldyBJbWFnZSgpO1xubGV0IGJvdHRvbV9sZWZ0ID0gbmV3IEltYWdlKCk7XG5sZXQgYm90dG9tX3JpZ2h0ID0gbmV3IEltYWdlKCk7XG5cbmJsb2NrLnNyYyA9IFwiLi9zcHJpdGVzL2Jsb2NrLnBuZ1wiO1xudG9wX2JvdHRvbS5zcmMgPSBcIi4vc3ByaXRlcy90b3AtYm90dG9tLnBuZ1wiO1xubGVmdF9yaWdodC5zcmMgPSBcIi4vc3ByaXRlcy9sZWZ0LXJpZ2h0LnBuZ1wiO1xudG9wX2xlZnQuc3JjID0gXCIuL3Nwcml0ZXMvdG9wLWxlZnQucG5nXCI7XG50b3BfcmlnaHQuc3JjID0gXCIuL3Nwcml0ZXMvdG9wLXJpZ2h0LnBuZ1wiO1xuYm90dG9tX2xlZnQuc3JjID0gXCIuL3Nwcml0ZXMvYm90dG9tLWxlZnQucG5nXCI7XG5ib3R0b21fcmlnaHQuc3JjID0gXCIuL3Nwcml0ZXMvYm90dG9tLXJpZ2h0LnBuZ1wiO1xuXG5cbmdhbWVNYXAuZm9yRWFjaCgocm93LCB5KSA9PiB7XG4gICAgcm93LmZvckVhY2goKGNlbGwsIHgpID0+IHtcbiAgICAgICAgaWYgKGNlbGwgPT09ICctJykge1xuICAgICAgICAgICAgYm91bmRhcmllcy5wdXNoKG5ldyBCb3VuZGFyeSh7IHg6IHggKiBCb3VuZGFyeS53aWR0aCwgeTogeSAqIEJvdW5kYXJ5LmhlaWdodCB9LCBibG9jaywgY3R4KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2VsbCA9PT0gJz0nKSB7XG4gICAgICAgICAgICBib3VuZGFyaWVzLnB1c2gobmV3IEJvdW5kYXJ5KHsgeDogeCAqIEJvdW5kYXJ5LndpZHRoLCB5OiB5ICogQm91bmRhcnkuaGVpZ2h0IH0sIHRvcF9ib3R0b20sIGN0eCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNlbGwgPT09ICd8Jykge1xuICAgICAgICAgICAgYm91bmRhcmllcy5wdXNoKG5ldyBCb3VuZGFyeSh7IHg6IHggKiBCb3VuZGFyeS53aWR0aCwgeTogeSAqIEJvdW5kYXJ5LmhlaWdodCB9LCBsZWZ0X3JpZ2h0LCBjdHgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjZWxsID09PSAndGwnKSB7XG4gICAgICAgICAgICBib3VuZGFyaWVzLnB1c2gobmV3IEJvdW5kYXJ5KHsgeDogeCAqIEJvdW5kYXJ5LndpZHRoLCB5OiB5ICogQm91bmRhcnkuaGVpZ2h0IH0sIHRvcF9sZWZ0LCBjdHgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjZWxsID09PSAndHInKSB7XG4gICAgICAgICAgICBib3VuZGFyaWVzLnB1c2gobmV3IEJvdW5kYXJ5KHsgeDogeCAqIEJvdW5kYXJ5LndpZHRoLCB5OiB5ICogQm91bmRhcnkuaGVpZ2h0IH0sIHRvcF9yaWdodCwgY3R4KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2VsbCA9PT0gJ2JsJykge1xuICAgICAgICAgICAgYm91bmRhcmllcy5wdXNoKG5ldyBCb3VuZGFyeSh7IHg6IHggKiBCb3VuZGFyeS53aWR0aCwgeTogeSAqIEJvdW5kYXJ5LmhlaWdodCB9LCBib3R0b21fbGVmdCwgY3R4KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2VsbCA9PT0gJ2JyJykge1xuICAgICAgICAgICAgYm91bmRhcmllcy5wdXNoKG5ldyBCb3VuZGFyeSh7IHg6IHggKiBCb3VuZGFyeS53aWR0aCwgeTogeSAqIEJvdW5kYXJ5LmhlaWdodCB9LCBib3R0b21fcmlnaHQsIGN0eCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNlbGwgPT09ICcqJykge1xuICAgICAgICAgICAgZm9vZFBlbGxldHMucHVzaChuZXcgRm9vZCh7IHg6IHggKiBCb3VuZGFyeS53aWR0aCArIEJvdW5kYXJ5LndpZHRoLzIsIHk6IHkgKiBCb3VuZGFyeS5oZWlnaHQgKyBCb3VuZGFyeS5oZWlnaHQvMiB9LCBjdHgpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbmNvbnN0IHBhY21hbjogUGFjbWFuID0gbmV3IFBhY21hbih7IHg6IEJvdW5kYXJ5LndpZHRoICsgQm91bmRhcnkud2lkdGggLzIsIHk6IEJvdW5kYXJ5LmhlaWdodCArIEJvdW5kYXJ5LmhlaWdodCAvMiB9LCBjdHgpO1xuXG5jb25zdCBrZXlzID0ge1xuICAgIHc6IHtcbiAgICAgICAgaXNEb3duOiBmYWxzZSxcbiAgICB9LFxuICAgIGE6IHtcbiAgICAgICAgaXNEb3duOiBmYWxzZSxcbiAgICB9LFxuICAgIHM6IHtcbiAgICAgICAgaXNEb3duOiBmYWxzZSxcbiAgICB9LFxuICAgIGQ6IHtcbiAgICAgICAgaXNEb3duOiBmYWxzZSxcbiAgICB9XG59XG5cbmxldCBsYXN0S2V5OiBzdHJpbmcgPSBcIlwiO1xuXG5cbmNvbnN0IGRlY3RlY3RDb2xsaXNpb24gPSAoY2lyY2xlLCByZWN0YW5nbGUpID0+IHtcbiAgICByZXR1cm4gY2lyY2xlLnBvc2l0aW9uLnggKyBjaXJjbGUucmFkaXVzICsgY2lyY2xlLnZlbG9jaXR5LnggPj0gcmVjdGFuZ2xlLnBvc2l0aW9uLnggJiYgXG4gICAgY2lyY2xlLnBvc2l0aW9uLnggLSBjaXJjbGUucmFkaXVzICsgY2lyY2xlLnZlbG9jaXR5LnggPD0gcmVjdGFuZ2xlLnBvc2l0aW9uLnggKyBCb3VuZGFyeS53aWR0aCAmJlxuICAgIGNpcmNsZS5wb3NpdGlvbi55ICsgY2lyY2xlLnJhZGl1cyArIGNpcmNsZS52ZWxvY2l0eS55ID49IHJlY3RhbmdsZS5wb3NpdGlvbi55ICYmXG4gICAgY2lyY2xlLnBvc2l0aW9uLnkgLSBjaXJjbGUucmFkaXVzICsgY2lyY2xlLnZlbG9jaXR5LnkgPD0gcmVjdGFuZ2xlLnBvc2l0aW9uLnkgKyBCb3VuZGFyeS5oZWlnaHRcbn1cblxuLy8gZnVuY3Rpb24gd3JpdHRlbiB1c2luZyBtYXRoLmh5cG90ZW51c2VcbmNvbnN0IGRldGVjdENvbGxpc2lvbldpdGhGb29kID0gKGNpcmNsZTogUGFjbWFuLCBmb29kOiBGb29kKSA9PiB7XG4gICAgcmV0dXJuIE1hdGguaHlwb3QoY2lyY2xlLnBvc2l0aW9uLnggKyBjaXJjbGUucmFkaXVzIC0gZm9vZC5wb3NpdGlvbi54LCBjaXJjbGUucG9zaXRpb24ueSArIGNpcmNsZS5yYWRpdXMgLSBmb29kLnBvc2l0aW9uLnkpIDw9IGNpcmNsZS5yYWRpdXMgKyBmb29kLnJhZGl1cyB8fFxuICAgIE1hdGguaHlwb3QoY2lyY2xlLnBvc2l0aW9uLnggLSBjaXJjbGUucmFkaXVzIC0gZm9vZC5wb3NpdGlvbi54LCBjaXJjbGUucG9zaXRpb24ueSArIGNpcmNsZS5yYWRpdXMgLSBmb29kLnBvc2l0aW9uLnkpIDw9IGNpcmNsZS5yYWRpdXMgKyBmb29kLnJhZGl1cyB8fFxuICAgIE1hdGguaHlwb3QoY2lyY2xlLnBvc2l0aW9uLnggKyBjaXJjbGUucmFkaXVzIC0gZm9vZC5wb3NpdGlvbi54LCBjaXJjbGUucG9zaXRpb24ueSAtIGNpcmNsZS5yYWRpdXMgLSBmb29kLnBvc2l0aW9uLnkpIDw9IGNpcmNsZS5yYWRpdXMgKyBmb29kLnJhZGl1cyB8fFxuICAgIE1hdGguaHlwb3QoY2lyY2xlLnBvc2l0aW9uLnggLSBjaXJjbGUucmFkaXVzIC0gZm9vZC5wb3NpdGlvbi54LCBjaXJjbGUucG9zaXRpb24ueSAtIGNpcmNsZS5yYWRpdXMgLSBmb29kLnBvc2l0aW9uLnkpIDw9IGNpcmNsZS5yYWRpdXMgKyBmb29kLnJhZGl1cztcblxufVxuXG5sZXQgYW5pbWF0ZSA9ICgpID0+IHtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgaWYgKGtleXMudy5pc0Rvd24gJiYgbGFzdEtleSA9PT0gXCJ3XCIpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGJvdW5kYXJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChkZWN0ZWN0Q29sbGlzaW9uKHsuLi5wYWNtYW4sIHZlbG9jaXR5OiB7eDowLCB5Oi1tYW5WZWxvY2l0eX19LCBib3VuZGFyaWVzW2ldKSkge1xuICAgICAgICAgICAgICAgIHBhY21hbi52ZWxvY2l0eS55ID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhY21hbi52ZWxvY2l0eS55ID0gLW1hblZlbG9jaXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGtleXMuYS5pc0Rvd24gJiYgbGFzdEtleSA9PT0gXCJhXCIpIHtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGJvdW5kYXJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChkZWN0ZWN0Q29sbGlzaW9uKHsuLi5wYWNtYW4sIHZlbG9jaXR5OiB7eDotbWFuVmVsb2NpdHksIHk6MH19LCBib3VuZGFyaWVzW2ldKSl7XG4gICAgICAgICAgICAgICAgcGFjbWFuLnZlbG9jaXR5LnggPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFjbWFuLnZlbG9jaXR5LnggPSAtbWFuVmVsb2NpdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoa2V5cy5zLmlzRG93biAmJiBsYXN0S2V5ID09PSBcInNcIikge1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYm91bmRhcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGRlY3RlY3RDb2xsaXNpb24oey4uLnBhY21hbiwgdmVsb2NpdHk6IHt4OjAsIHk6bWFuVmVsb2NpdHl9fSwgYm91bmRhcmllc1tpXSkpe1xuICAgICAgICAgICAgICAgIHBhY21hbi52ZWxvY2l0eS55ID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhY21hbi52ZWxvY2l0eS55ID0gbWFuVmVsb2NpdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoa2V5cy5kLmlzRG93biAmJiBsYXN0S2V5ID09PSBcImRcIikge1xuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYm91bmRhcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGRlY3RlY3RDb2xsaXNpb24oey4uLnBhY21hbiwgdmVsb2NpdHk6IHt4Om1hblZlbG9jaXR5LCB5OjB9fSwgYm91bmRhcmllc1tpXSkpe1xuICAgICAgICAgICAgICAgIHBhY21hbi52ZWxvY2l0eS54ID0gMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhY21hbi52ZWxvY2l0eS54ID0gbWFuVmVsb2NpdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBib3VuZGFyaWVzLmZvckVhY2goYm91bmRhcnkgPT4ge1xuICAgICAgICBib3VuZGFyeS5kcmF3KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGVjdGVjdENvbGxpc2lvbihwYWNtYW4sIGJvdW5kYXJ5KSkge1xuICAgICAgICAgICAgICAgIHBhY21hbi52ZWxvY2l0eS54ID0gMDtcbiAgICAgICAgICAgICAgICBwYWNtYW4udmVsb2NpdHkueSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmb29kUGVsbGV0cy5mb3JFYWNoKChwZWxsZXQsIGkpID0+IHtcbiAgICAgICAgcGVsbGV0LmRyYXcoKTtcbiAgICAgICAgaWYgKGRldGVjdENvbGxpc2lvbldpdGhGb29kKHBhY21hbiwgcGVsbGV0KSkge1xuICAgICAgICAgICAgZm9vZFBlbGxldHMuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBwYWNtYW4udXBkYXRlKCk7XG5cbiAgICAvLyBwYWNtYW4udmVsb2NpdHkueCA9IDA7XG4gICAgLy8gcGFjbWFuLnZlbG9jaXR5LnkgPSAwO1xuXG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgY2FzZSBcImFcIjpcbiAgICAgICAgICAgIGtleXMuYS5pc0Rvd24gPSB0cnVlO1xuICAgICAgICAgICAgbGFzdEtleSA9IFwiYVwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgICAgICBrZXlzLmQuaXNEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgIGxhc3RLZXkgPSBcImRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwid1wiOlxuICAgICAgICAgICAga2V5cy53LmlzRG93biA9IHRydWU7XG4gICAgICAgICAgICBsYXN0S2V5ID0gXCJ3XCI7ICBcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgICAga2V5cy5zLmlzRG93biA9IHRydWU7XG4gICAgICAgICAgICBsYXN0S2V5ID0gXCJzXCI7IFxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufSk7XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgICAgICBrZXlzLmEuaXNEb3duID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICAgIGtleXMuZC5pc0Rvd24gPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwid1wiOlxuICAgICAgICAgICAga2V5cy53LmlzRG93biA9IGZhbHNlOyAgXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICAgIGtleXMucy5pc0Rvd24gPSBmYWxzZTsgXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59KTtcblxuYW5pbWF0ZSgpO1xuXG5cbiIsImltcG9ydCB7IFBvc2l0aW9uIH0gZnJvbSBcIi4vQm91bmRhcnlcIjtcblxuY2xhc3MgRm9vZCB7XG4gICAgcG9zaXRpb246IFBvc2l0aW9uO1xuICAgIHJhZGl1czogbnVtYmVyO1xuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gICAgY29uc3RydWN0b3IocG9zaXRpb246IFBvc2l0aW9uLCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMucmFkaXVzID0gNTtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gXCJncmVlblwiO1xuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHguYXJjKHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCB0aGlzLnJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xuICAgICAgICB0aGlzLmN0eC5maWxsKCk7XG4gICAgICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9vZDsiLCJpbXBvcnQgeyBQb3NpdGlvbiB9IGZyb20gXCIuL0JvdW5kYXJ5XCI7XG5cbmNsYXNzIFBhY21hbiB7XG4gICAgcG9zaXRpb246IFBvc2l0aW9uO1xuICAgIHZlbG9jaXR5OiB7eDogbnVtYmVyLCB5OiBudW1iZXJ9O1xuICAgIHJhZGl1czogbnVtYmVyO1xuICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gICAgY29uc3RydWN0b3IocG9zaXRpb246IFBvc2l0aW9uLCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgdGhpcy5yYWRpdXMgPSAxNTtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gXCJ5ZWxsb3dcIjtcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LmFyYyh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSwgdGhpcy5yYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICAgICAgdGhpcy5jdHguZmlsbCgpO1xuICAgICAgICB0aGlzLmN0eC5jbG9zZVBhdGgoKTtcbiAgICB9XG5cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uLnkgKz0gdGhpcy52ZWxvY2l0eS55O1xuICAgICAgICB0aGlzLnBvc2l0aW9uLnggKz0gdGhpcy52ZWxvY2l0eS54O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFjbWFuOyJdLCJuYW1lcyI6WyJCb3VuZGFyeSIsImNvbnN0cnVjdG9yIiwicG9zaXRpb24iLCJpbWFnZSIsImN0eCIsInRoaXMiLCJkcmF3IiwiZHJhd0ltYWdlIiwieCIsInkiLCJ3aWR0aCIsImhlaWdodCIsImhlYWRpbmciLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImNhbnZhcyIsImdldENvbnRleHQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJpZCIsImFwcCIsImdldEVsZW1lbnRCeUlkIiwiYXBwZW5kQ2hpbGQiLCJib3VuZGFyaWVzIiwiZm9vZFBlbGxldHMiLCJibG9jayIsIkltYWdlIiwidG9wX2JvdHRvbSIsImxlZnRfcmlnaHQiLCJ0b3BfbGVmdCIsInRvcF9yaWdodCIsImJvdHRvbV9sZWZ0IiwiYm90dG9tX3JpZ2h0Iiwic3JjIiwiZm9yRWFjaCIsInJvdyIsImNlbGwiLCJwdXNoIiwicmFkaXVzIiwiZmlsbFN0eWxlIiwiYmVnaW5QYXRoIiwiYXJjIiwiTWF0aCIsIlBJIiwiZmlsbCIsImNsb3NlUGF0aCIsInBhY21hbiIsInZlbG9jaXR5IiwidXBkYXRlIiwia2V5cyIsInciLCJpc0Rvd24iLCJhIiwicyIsImQiLCJsYXN0S2V5IiwiZGVjdGVjdENvbGxpc2lvbiIsImNpcmNsZSIsInJlY3RhbmdsZSIsImFuaW1hdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjbGVhclJlY3QiLCJpIiwibGVuZ3RoIiwiYm91bmRhcnkiLCJwZWxsZXQiLCJmb29kIiwiaHlwb3QiLCJzcGxpY2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImtleSJdLCJzb3VyY2VSb290IjoiIn0=